import BaseControl from '../components/BaseControl';
import { useLocalStorage } from '../hooks/useLocalStorage';

export const BasicDemo = () => {
  const [value, setValue] = useLocalStorage('demo-base-control-basic', '');
  return (
    <BaseControl
      id="custom-color-input"
      label="Custom Color"
      help="Choose a hex color value."
    >
      <input
        id="custom-color-input"
        type="color"
        value={value}
        onChange={(e) => setValue(e.target.value)}
        style={{ display: 'block', width: '100%', height: '40px' }}
      />
    </BaseControl>
  );
};

export const CustomSliderDemo = () => {
  const [value, setValue] = useLocalStorage('demo-base-control-slider', 50);
  return (
    <div>
      <BaseControl
        id="custom-slider"
        label="Custom Slider"
        help="Adjust the value using the slider."
      >
        <div style={{ display: 'flex', alignItems: 'center', gap: '1rem' }}>
          <input
            id="custom-slider"
            type="range"
            value={value}
            onChange={(e) => setValue(Number(e.target.value))}
            min={0}
            max={100}
            style={{ flex: 1 }}
          />
          <span>{value}</span>
        </div>
      </BaseControl>
      { value > 0 && (
        <div style={{
          marginTop: '0.75rem',
          padding: '1rem',
          background: `rgba(59, 130, 246, ${value / 100})`,
          borderRadius: '0.375rem',
          color: value > 50 ? 'white' : 'black',
        }}>
          Preview area
        </div>
      )}
    </div>
  );
};

# BaseControl

The foundational wrapper for custom form controls. Provides a label, help text, and proper accessibility wiring (htmlFor/id association) for any child input. Mirrors the WordPress [`BaseControl`](https://developer.wordpress.org/block-editor/reference-guides/components/base-control/) from `@wordpress/components`.

## Basic Usage

<BasicDemo />

```jsx
<BaseControl
  id="custom-color-input"
  label="Custom Color"
  help="Choose a hex color value."
>
  <input
    id="custom-color-input"
    type="color"
    value={customColor}
    onChange={(e) => setAttributes({ customColor: e.target.value })}
    style={{ display: 'block', width: '100%', height: '40px' }}
  />
</BaseControl>
```

## Custom Slider

<CustomSliderDemo />

```jsx
<BaseControl
  id="custom-slider"
  label="Custom Slider"
  help="Adjust the value using the slider."
>
  <div style={{ display: 'flex', alignItems: 'center', gap: '1rem' }}>
    <input
      id="custom-slider"
      type="range"
      value={value}
      onChange={(e) => setValue(Number(e.target.value))}
      min={0}
      max={100}
      style={{ flex: 1 }}
    />
    <span>{value}</span>
  </div>
</BaseControl>
```

## WordPress Usage (edit.js)

```jsx
import { __ } from '@wordpress/i18n';
import { BaseControl, PanelBody } from '@wordpress/components';
import { InspectorControls, useBlockProps } from '@wordpress/block-editor';

export default function Edit( { attributes, setAttributes } ) {
  const blockProps = useBlockProps();
  const { customColor } = attributes;

  return (
    <>
      <InspectorControls>
        <PanelBody title={ __( 'Appearance', 'your-text-domain' ) }>
          <BaseControl
            id="my-block-custom-color"
            label={ __( 'Custom Color', 'your-text-domain' ) }
            help={ __( 'Choose a hex color value.', 'your-text-domain' ) }
          >
            <input
              id="my-block-custom-color"
              type="color"
              value={ customColor }
              onChange={ ( event ) =>
                setAttributes( { customColor: event.target.value } )
              }
              style={ { display: 'block', width: '100%', height: '40px' } }
            />
          </BaseControl>
        </PanelBody>
      </InspectorControls>

      <div { ...blockProps } style={ { color: customColor } }>
        <p>{ __( 'Block content.', 'your-text-domain' ) }</p>
      </div>
    </>
  );
}
```

## Props

<PropsTable props={[
  {
    name: 'id',
    type: 'string',
    required: true,
    default: '',
    description: 'ID for the control (used for htmlFor association).'
  },
  {
    name: 'label',
    type: 'string',
    required: true,
    default: '',
    description: 'Label text for the control.'
  },
  {
    name: 'help',
    type: 'string',
    required: false,
    default: '',
    description: 'Optional help text displayed below the control.'
  },
  {
    name: 'className',
    type: 'string',
    required: false,
    default: '',
    description: 'Additional CSS class names.'
  },
  {
    name: 'children',
    type: 'ReactNode',
    required: true,
    default: '',
    description: 'The form control input element(s).'
  }
]} />

## WordPress Mapping

`BaseControl` is used internally by all `@wordpress/components` form controls to render their label and help text. Use it directly when building a **custom control** that is not already covered by an existing WordPress component â€” it handles the `htmlFor`/`id` association, label rendering, and help text placement consistently with all other core controls.
