import SearchControl from '../components/SearchControl';
import { useLocalStorage } from '../hooks/useLocalStorage';
import { useState } from 'react';

export const BasicDemo = () => {
  const [searchQuery, setSearchQuery] = useLocalStorage('demo-search-basic', '');
  return (
    <div>
      <SearchControl
        label="Search Posts"
        value={searchQuery}
        onChange={setSearchQuery}
      />
      {searchQuery && (
        <div style={{
          marginTop: '0.75rem',
          padding: '1rem',
          background: '#f8fafc',
          border: '1px solid #e2e8f0',
          borderRadius: '0.375rem',
        }}>
          Searching for: <strong>{searchQuery}</strong>
        </div>
      )}
    </div>
  );
};

export const FilterListDemo = () => {
  const [search, setSearch] = useLocalStorage('demo-search-filter', '');
  
  const allIcons = [
    { id: 'star', label: 'Star' },
    { id: 'heart', label: 'Heart' },
    { id: 'arrow', label: 'Arrow' },
    { id: 'check', label: 'Checkmark' },
    { id: 'info', label: 'Info' },
    { id: 'warning', label: 'Warning' },
  ];

  const filteredIcons = search
    ? allIcons.filter(icon =>
        icon.label.toLowerCase().includes(search.toLowerCase())
      )
    : allIcons;

  return (
    <div>
      <SearchControl
        label="Search Icons"
        value={search}
        onChange={setSearch}
        placeholder="Type to filter..."
      />
      <div style={{
        marginTop: '0.75rem',
        padding: '1rem',
        background: '#f8fafc',
        border: '1px solid #e2e8f0',
        borderRadius: '0.375rem',
      }}>
        <div style={{ fontSize: '0.875rem', marginBottom: '0.5rem' }}>
          {filteredIcons.length} of {allIcons.length} icons
        </div>
        <ul style={{ margin: 0, padding: 0, listStyle: 'none' }}>
          {filteredIcons.map(icon => (
            <li key={icon.id} style={{ padding: '0.25rem 0' }}>
              {icon.label}
            </li>
          ))}
        </ul>
        {filteredIcons.length === 0 && (
          <p style={{ margin: 0, color: '#64748b' }}>No icons found.</p>
        )}
      </div>
    </div>
  );
};

# SearchControl

A search input with a clear (Ã—) button. Used for filtering posts, taxonomy terms, or other lists inside the block editor. Mirrors the WordPress [`SearchControl`](https://developer.wordpress.org/block-editor/reference-guides/components/search-control/) from `@wordpress/components`.

## Basic Usage

<BasicDemo />

```jsx
<SearchControl
  label="Search Posts"
  value={searchQuery}
  onChange={(value) => setSearchQuery(value)}
/>
```

## Filtering a List

<FilterListDemo />

```jsx
const allIcons = [
  { id: 'star', label: 'Star' },
  { id: 'heart', label: 'Heart' },
  { id: 'arrow', label: 'Arrow' },
];

const filteredIcons = search
  ? allIcons.filter(icon =>
      icon.label.toLowerCase().includes(search.toLowerCase())
    )
  : allIcons;

<SearchControl
  label="Search Icons"
  value={search}
  onChange={setSearch}
  placeholder="Type to filter..."
/>
```

## WordPress Usage (edit.js)

```jsx
import { __ } from '@wordpress/i18n';
import { SearchControl, PanelBody } from '@wordpress/components';
import { InspectorControls, useBlockProps } from '@wordpress/block-editor';
import { useState } from '@wordpress/element';

export default function Edit( { attributes, setAttributes } ) {
  const blockProps = useBlockProps();
  const [ searchQuery, setSearchQuery ] = useState( '' );

  return (
    <>
      <InspectorControls>
        <PanelBody title={ __( 'Content', 'your-text-domain' ) }>
          <SearchControl
            label={ __( 'Search Posts', 'your-text-domain' ) }
            value={ searchQuery }
            onChange={ ( value ) => setSearchQuery( value ) }
          />
        </PanelBody>
      </InspectorControls>

      <div { ...blockProps }>
        <p>{ __( 'Block content.', 'your-text-domain' ) }</p>
      </div>
    </>
  );
}
```

## Props

<PropsTable props={[
  {
    name: 'label',
    type: 'string',
    required: true,
    default: '',
    description: 'Label text for the search input.'
  },
  {
    name: 'value',
    type: 'string',
    required: true,
    default: '',
    description: 'Current search value (controlled).'
  },
  {
    name: 'onChange',
    type: 'function',
    required: true,
    default: '',
    description: 'Callback fired with the new string value on change.'
  },
  {
    name: 'placeholder',
    type: 'string',
    required: false,
    default: 'Search...',
    description: 'Placeholder text.'
  },
  {
    name: 'help',
    type: 'string',
    required: false,
    default: '',
    description: 'Optional help text displayed below the input.'
  },
  {
    name: 'className',
    type: 'string',
    required: false,
    default: '',
    description: 'Additional CSS class names.'
  }
]} />

## WordPress Mapping

`SearchControl` is commonly used in block editor panels to filter posts, taxonomy terms, media items, or any dynamic list. It pairs well with `apiFetch` for server-side searches or can filter client-side arrays.
